<div class="container mx-auto px-5 py-3">
    <!-- Header -->
    <h1 class="primaryTxt font-semibold text-2xl leading-9 mb-6">Medical Report</h1>

<div *ngIf="selectedTab === 'Hygiene Form'" class="space-y-4">

<!-- Filtration System -->
<div class="mt-6 mb-4 rounded-3xl flex justify-between flex-wrap">
    <!-- School Select -->
    <div class="flex flex-col mb-4 w-[49%]">
        <label class="mb-2 primaryTxt" for="school">School</label>
        <select id="school" [(ngModel)]="selectedSchool" (change)="onSchoolChange()"
            class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto">
            <option [value]="null" disabled selected hidden>Choose School</option>
            <option *ngFor="let school of schools" [value]="school.id">{{ school.name }}</option>
            <option *ngIf="schools.length === 0" disabled selected>No Data Found</option>
        </select>
    </div>

    <!-- Grade Select -->
    <div class="flex flex-col mb-4 w-[49%]">
        <label class="mb-2 primaryTxt" for="grade">Grade</label>
        <select id="grade" [(ngModel)]="selectedGrade" (change)="onGradeChange()"
            class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto"
            [disabled]="!selectedSchool">
            <option [value]="null" disabled selected hidden>Choose Grade</option>
            <option *ngFor="let grade of grades" [value]="grade.id">{{ grade.name }}</option>
            <option *ngIf="grades.length === 0" disabled selected>No Data Found</option>
        </select>
    </div>

    <!-- Class Select -->
    <div class="flex flex-col mb-4 w-[78%]">
        <label class="mb-2 primaryTxt" for="class">Class</label>
        <select id="class" [(ngModel)]="selectedClass" (change)="onClassChange()"
            class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto"
            [disabled]="!selectedGrade">
            <option [value]="null" disabled selected hidden>Choose Class</option>
            <option *ngFor="let class of classes" [value]="class.id">{{ class.name }}</option>
            <option *ngIf="classes.length === 0" disabled selected>No Data Found</option>
        </select>
    </div>

    <!-- Date Input
        <div class="flex flex-col mb-4 w-[49%]">
            <label class="mb-2 primaryTxt" for="date">Date</label>
            <input type="date" id="date" [(ngModel)]="selectedDate"
                class="rounded-lg border border-solid border-gray-300 px-4 py-3" [disabled]="!selectedClass">
        </div> -->

    <!-- Filter Button -->
    <div class="flex flex-col mb-4 w-[20%] justify-end">
        <button (click)="filterStudents()"
            class="text-white rounded-lg px-4 py-2.5 flex items-center justify-center gap-2 bg-[#FF7519]">
            Search for
        </button>
    </div>
</div>
</div>


<div *ngIf="selectedTab === 'Follow Up'" class="space-y-4">
    <div class="mt-6 mb-4 rounded-3xl flex justify-between flex-wrap">
                <!-- School Select -->
                <div class="flex flex-col mb-4 w-[49%]">
                    <label class="mb-2 primaryTxt" for="school">School</label>
                    <select id="school" [(ngModel)]="selectedSchool" (change)="onSchoolChange()"
                        class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto">
                        <option [value]="null" disabled selected hidden>Choose School</option>
                        <option *ngFor="let school of schools" [value]="school.id">{{ school.name }}</option>
                        <option *ngIf="schools.length === 0" disabled selected>No Data Found</option>
                    </select>
                </div>
                
                <!-- Grade Select -->
                <div class="flex flex-col mb-4 w-[49%]">
                    <label class="mb-2 primaryTxt" for="grade">Grade</label>
                    <select id="grade" [(ngModel)]="selectedGrade" (change)="onGradeChange()"
                        class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto" [disabled]="!selectedSchool">
                        <option [value]="null" disabled selected hidden>Choose Grade</option>
                        <option *ngFor="let grade of grades" [value]="grade.id">{{ grade.name }}</option>
                        <option *ngIf="grades.length === 0" disabled selected>No Data Found</option>
                    </select>
                </div>
                
                <!-- Class Select -->
                <div class="flex flex-col mb-4 w-[78%]">
                    <label class="mb-2 primaryTxt" for="class">Class</label>
                    <select id="class" [(ngModel)]="selectedClass" (change)="onClassChange()"
                        class="rounded-lg border border-solid border-gray-300 px-4 py-3 overflow-y-auto" [disabled]="!selectedGrade">
                        <option [value]="null" disabled selected hidden>Choose Class</option>
                        <option *ngFor="let class of classes" [value]="class.id">{{ class.name }}</option>
                        <option *ngIf="classes.length === 0" disabled selected>No Data Found</option>
                    </select>
                </div>
                
                <!-- Filter Button -->
                <div class="flex flex-col mb-4 w-[20%] justify-end">
                    <button (click)="filterFollowUps()"
                        class="text-white rounded-lg px-4 py-2.5 flex items-center justify-center gap-2 bg-[#FF7519]">
                        Search for
                    </button>
                </div>
                </div>
</div>
</div>



    <!-- Tabs and Buttons Section -->
    <div class="flex justify-between items-center mb-6">
        <!-- Tabs -->
        <div class="flex space-x-4">
            <button *ngFor="let tab of tabs" (click)="selectTab(tab)" [ngClass]="{
        'bg-[#FF7519] text-white': selectedTab === tab,
        'bg-gray-200 text-gray-700': selectedTab !== tab
      }" class="px-4 py-3 text-sm font-medium rounded-sm focus:outline-none transition-colors duration-200">
                {{ tab }}
            </button>
        </div>

        <!-- Print Buttons -->
        <div class="flex space-x-4">
            <button (click)="exportToExcel()"
                class="secondaryBg text-white px-4 py-2 rounded-lg flex items-center gap-2">
                <i class="fa-solid fa-file-excel"></i> Excel
            </button>
            <button (click)="exportToPDF()" class="secondaryBg text-white px-4 py-2 rounded-lg flex items-center gap-2">
                <i class="fa-solid fa-file-pdf"></i> PDF
            </button>
            <button (click)="printTable()" class="secondaryBg text-white px-4 py-2 rounded-lg flex items-center gap-2">
                <i class="fa-solid fa-print"></i> Print
            </button>
        </div>
    </div>

    <!-- Tab Content -->
    <div *ngIf="selectedTab === 'MH By Parent'">
        <app-table [headers]="['Date', 'Description', 'Insert Date', 'Last Modified', 'Actions']"
            [data]="mhByParentData" [keys]="['date', 'description', 'insertDate', 'lastModified']"
    [showViewAction]="true"
    (view)="onView($event)"></app-table>
    </div>


    <div *ngIf="selectedTab === 'MH By Doctor'">
        <app-table [headers]="['Date', 'Description', 'Insert Date', 'Last Modified', 'Actions']" [data]="mhByDoctorData"
            [keys]="['date', 'description', 'insertDate', 'lastModified']"
                [showViewAction]="true"
    (view)="onView($event)"></app-table>
    </div>


    <!-- Hygiene Form Table -->
<div *ngIf="selectedTab === 'Hygiene Form'" class="space-y-4">
    <!-- Hygiene Form Table -->
    <app-hygiene-form-table [students]="students" [hygieneTypes]="hygieneTypes" [isViewOnly]="true"
        [showSelectAll]="false"> <!-- Set showSelectAll to false -->
    </app-hygiene-form-table>
</div>



<div *ngIf="selectedTab === 'Follow Up'" class="space-y-4">
    <div class="mt-6 mb-4 rounded-3xl flex justify-between flex-wrap">
    <!-- Follow Up Table -->
    <div class="block">
        <app-table
            [headers]="['ID', 'School', 'Grade', 'Class', 'Student', 'Complaints', 'Diagnosis', 'Recommendation', 'Actions']"
            [data]="filteredFollowUps"
            [keys]="['id', 'schoolName', 'gradeName', 'className', 'studentName', 'complaints', 'diagnosisName', 'recommendation']"
            (delete)="deleteFollowUp($event)">
        </app-table>
    </div>
</div>

</div>